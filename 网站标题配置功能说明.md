# 网站标题配置功能说明

## ✅ 功能概述

管理员可以在后台系统设置中配置网站标题和副标题，配置后会实时应用到：
1. **H5首页顶部标语栏**：显示网站副标题
2. **浏览器标题栏**：显示网站标题（document.title）

---

## 🎯 实现内容

### 1️⃣ 数据库层（Backend）
- ✅ 在 `system_settings` 表中添加了两条配置：
  - `site_title`：网站标题（默认：计分系统）
  - `site_subtitle`：网站副标题（默认：一分耕耘，一分收获）

### 2️⃣ 后端接口（Backend）
- ✅ 新增公开接口：`GET /api/system/settings/public`
  - 无需登录即可访问
  - 返回网站标题和副标题
- ✅ 更新管理接口：`PUT /api/admin/system-settings`
  - 支持更新网站标题和副标题
- ✅ DTO 验证：添加了 `siteTitle` 和 `siteSubtitle` 字段验证

### 3️⃣ H5 用户端（Frontend-H5）
- ✅ 首页加载时自动获取系统设置
- ✅ 顶部标语栏显示动态副标题
- ✅ 浏览器标题栏显示动态标题
- ✅ 获取失败时使用默认值

### 4️⃣ 管理后台（Frontend-Admin）
- ✅ 系统设置页面新增"网站设置"分组
- ✅ 可配置网站标题（最多50字符）
- ✅ 可配置网站副标题（最多100字符）
- ✅ 实时保存并应用

---

## 📋 数据库初始化

系统已自动初始化默认配置，如果需要重新初始化，运行：

```bash
cd score-system/backend
npm run prisma:seed
```

---

## 🔌 API 接口

### 用户端（公开接口）

#### 获取公开系统设置
```
GET /api/system/settings/public
```

**响应示例：**
```json
{
  "code": 200,
  "data": {
    "siteTitle": "计分系统",
    "siteSubtitle": "一分耕耘，一分收获"
  }
}
```

---

### 管理端（需要登录）

#### 获取所有系统设置
```
GET /api/admin/system-settings
```

#### 更新系统设置
```
PUT /api/admin/system-settings
```

**请求参数：**
```json
{
  "siteTitle": "我的计分系统",
  "siteSubtitle": "欢迎来到我的系统",
  "gameEnabled": true,
  "maintenanceMode": false,
  ...
}
```

---

## 🎨 使用方法

### 管理员配置
1. 登录后台管理系统
2. 点击左侧菜单"网站设置"
3. 在"网站设置"分组中修改：
   - **网站标题**：显示在浏览器标题栏
   - **网站副标题**：显示在H5首页顶部
4. 点击"保存设置"
5. 配置立即生效

### 用户端效果
- 打开H5页面，顶部标语栏显示新的副标题
- 浏览器标签页显示新的网站标题
- 无需刷新，新用户访问即可看到新配置

---

## 📸 显示位置

### H5 用户端
```
┌─────────────────────────────────┐
│  【网站副标题】                    │ ← 顶部标语栏
├─────────────────────────────────┤
│  距 3365897 期    积分 338        │
│  距封盘 02:09                     │
├─────────────────────────────────┤
│  第 3365896 期                    │
│  8  5  6  19  大  单              │
└─────────────────────────────────┘

浏览器标签页：【网站标题】
```

---

## 💡 默认配置

| 配置项 | 默认值 | 说明 |
|-------|--------|------|
| 网站标题 | 计分系统 | 显示在浏览器标题栏 |
| 网站副标题 | 一分耕耘，一分收获 | 显示在H5首页顶部 |

---

## 🔧 技术实现

### 数据流程
1. 用户访问H5首页
2. 前端调用 `/api/system/settings/public` 获取配置
3. 更新 `siteTitle` 和 `siteSubtitle` 变量
4. 更新 `document.title` 为网站标题
5. 顶部标语栏显示网站副标题

### 缓存策略
- 每次打开H5页面都会重新获取最新配置
- 无本地缓存，确保配置实时生效

---

## 🎉 完成！

网站标题配置功能已全部实现，管理员可以随时在后台修改网站标题和副标题，配置会立即应用到所有用户的H5页面。

