# 🚀 快速配置启动（5分钟）

## 第1步：复制配置文件（30秒）

```bash
cd score-system
cp env.template .env
```

或者手动创建 `.env` 文件。

---

## 第2步：生成JWT密钥（30秒）

运行以下命令生成随机密钥：

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

**输出示例**：
```
a8f5f167f44f4964e6c998dee827110c3b7f8ed2c2c38d5e2f8f3b1c8c2e7a3d
```

**复制这个输出结果**，后面要用。

---

## 第3步：编辑.env文件（2分钟）

用文本编辑器打开 `.env` 文件：

```bash
# Windows
notepad .env

# Linux/Mac
vim .env
# 或
nano .env
```

**只需修改这3行**：

```env
# 1. 改成你自己的MySQL root密码（可以简单点，比如：MyPass123!）
MYSQL_ROOT_PASSWORD=YourStrong@Pass2024

# 2. 改成你自己的MySQL用户密码（可以简单点，比如：UserPass123!）
MYSQL_PASSWORD=ScoreUser@Pass2024

# 3. 粘贴第2步生成的JWT密钥
JWT_SECRET=a8f5f167f44f4964e6c998dee827110c3b7f8ed2c2c38d5e2f8f3b1c8c2e7a3d
```

**保存文件**。

---

## 第4步：启动服务（2分钟）

### Windows用户

```bash
# 方法1：使用启动脚本（推荐）
bash docker-start.sh

# 方法2：直接使用docker-compose
docker-compose up -d
```

### Linux/Mac用户

```bash
# 方法1：使用启动脚本（推荐）
chmod +x docker-start.sh
./docker-start.sh

# 方法2：直接使用docker-compose
docker-compose up -d
```

---

## 第5步：等待启动（30秒）

首次启动需要下载Docker镜像和初始化数据库，大约30秒到2分钟。

查看启动日志：
```bash
docker-compose logs -f
```

看到以下内容表示启动成功：
```
✅ MySQL is ready!
✅ Backend initialization complete!
🎯 Starting application...
```

按 `Ctrl+C` 退出日志查看。

---

## 第6步：访问系统（10秒）

### 打开浏览器访问：

1. **API文档**（测试后端是否正常）
   - 地址：http://localhost:3000/api-docs
   - 应该看到Swagger文档页面

2. **H5前端**（用户端）
   - 地址：http://localhost:5173
   - 测试账号：`user001` / `123456`

3. **管理后台**
   - 地址：http://localhost:5174
   - 管理员账号：`admin` / `admin123`

---

## ✅ 完成！

现在系统已经完全启动，你可以：

- 📱 用手机访问H5前端（使用电脑IP地址）
- 💻 用电脑访问管理后台
- 🔧 通过API文档测试接口

---

## 🛠️ 常用命令

### 查看运行状态
```bash
docker-compose ps
```

### 查看日志
```bash
# 查看所有服务日志
docker-compose logs -f

# 查看特定服务日志
docker-compose logs -f backend
docker-compose logs -f mysql
```

### 重启服务
```bash
# 重启所有服务
docker-compose restart

# 重启特定服务
docker-compose restart backend
```

### 停止服务
```bash
# 停止服务（保留数据）
docker-compose down

# 停止并删除所有数据
docker-compose down -v
```

---

## 🎯 完整配置示例

如果你想直接复制粘贴，这是一个完整的 `.env` 配置：

```env
# MySQL配置
MYSQL_ROOT_PASSWORD=MyRoot@Pass2024
MYSQL_DATABASE=yunce_score_system
MYSQL_USER=score_user
MYSQL_PASSWORD=MyUser@Pass2024
MYSQL_PORT=3307

# Redis配置
REDIS_PASSWORD=
REDIS_PORT=6380

# JWT配置（记得改成你生成的）
JWT_SECRET=a8f5f167f44f4964e6c998dee827110c3b7f8ed2c2c38d5e2f8f3b1c8c2e7a3d
JWT_EXPIRES_IN=7d
JWT_ADMIN_EXPIRES_IN=12h

# 端口配置
BACKEND_PORT=3000
H5_PORT=5173
ADMIN_PORT=5174

# API地址
VITE_API_BASE_URL=http://localhost:3000/api

# 环境配置
NODE_ENV=production
INIT_SEED=true

# 开奖数据源（可选）
LOTTERY_DATA_SOURCE=
```

**记得修改**：
- ✅ `MYSQL_ROOT_PASSWORD` - 改成你的密码
- ✅ `MYSQL_PASSWORD` - 改成你的密码
- ✅ `JWT_SECRET` - 改成生成的随机密钥

---

## ❓ 遇到问题？

### 问题1：端口被占用

**错误提示**：`port is already allocated`

**解决方法**：修改 `.env` 中的端口
```env
MYSQL_PORT=3308  # 改成其他端口
BACKEND_PORT=3001
```

### 问题2：Docker没启动

**错误提示**：`Cannot connect to the Docker daemon`

**解决方法**：启动Docker Desktop

### 问题3：无法访问

**检查步骤**：
```bash
# 1. 检查容器是否运行
docker-compose ps

# 2. 查看日志
docker-compose logs -f backend

# 3. 检查端口
netstat -ano | findstr "3000"
```

---

## 📚 更多帮助

- [ENV配置填写指南.md](./ENV配置填写指南.md) - 详细配置说明
- [Docker避免冲突说明.md](./Docker避免冲突说明.md) - 避免和其他项目冲突
- [快速配置独立数据库.md](./快速配置独立数据库.md) - 数据库配置

---

**🎉 5分钟配置完成，开始使用吧！**

**创建日期**：2024年11月26日



