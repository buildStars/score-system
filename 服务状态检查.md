# 🔍 服务状态检查指南

## ✅ 当前状态

### 已启动的服务

| 服务 | 状态 | 地址 | 端口 |
|------|------|------|------|
| **后端 API** | 🔄 启动中 | http://localhost:3000 | 3000 |
| **管理后台** | ✅ 运行中 | http://localhost:5174 | 5174 |

---

## 🧪 快速检查步骤

### 1. 检查后端服务是否启动成功

**方法一：浏览器访问**

打开浏览器，访问：http://localhost:3000

**预期结果：**
- ✅ 看到 API 响应（任何非错误页面）
- ✅ 或看到 404 Not Found（说明服务在运行，只是根路径没有定义）

**方法二：使用 PowerShell**

```powershell
Invoke-WebRequest -Uri http://localhost:3000 -Method GET
```

**方法三：使用 CMD**

```cmd
curl http://localhost:3000
```

---

### 2. 检查管理后台

打开浏览器访问：http://localhost:5174

**预期结果：**
- ✅ 看到登录页面
- ✅ 可以输入账号密码

**默认账号：**
- 账号：`admin`
- 密码：`admin123`

---

### 3. 测试完整流程

#### Step 1: 登录管理后台

1. 访问 http://localhost:5174
2. 输入账号：`admin`
3. 输入密码：`admin123`
4. 点击登录

**如果登录成功 ✅**
- 说明前后端都正常工作
- 可以开始使用系统

**如果登录失败 ❌**
- 检查浏览器控制台（F12）查看错误信息
- 检查后端服务是否正常运行

---

## 🐛 常见问题排查

### 问题1：后端服务无法访问

**现象：**
- 浏览器显示"无法访问此网站"
- 或显示"ERR_CONNECTION_REFUSED"

**排查步骤：**

1. **检查进程是否在运行**

```powershell
# 检查 Node.js 进程
Get-Process node -ErrorAction SilentlyContinue

# 检查端口是否被监听
netstat -ano | findstr :3000
```

2. **查看后端日志**

在新的终端窗口：
```bash
cd score-system/backend
# 如果后台进程停止了，重新启动
npm run start:dev
```

3. **检查 .env 配置**

确认 `backend/.env` 文件中：
```env
PORT=3000
```

---

### 问题2：数据库连接失败

**现象：**
后端启动时报错：
```
Error: P1001: Can't reach database server
```

**解决方案：**

1. **检查 MySQL 服务是否启动**

```powershell
# 检查 MySQL 服务
Get-Service -Name MySQL* | Select-Object Name, Status
```

如果没有启动：
```powershell
# 启动 MySQL 服务（以管理员身份运行）
Start-Service MySQL80  # 服务名可能不同
```

2. **检查数据库配置**

在 `backend/.env` 中：
```env
DATABASE_URL="mysql://用户名:密码@localhost:3306/数据库名"
```

3. **创建数据库**

```sql
CREATE DATABASE score_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

4. **测试数据库连接**

```bash
cd score-system/backend
npx prisma db pull
```

---

### 问题3：管理后台登录失败

**现象：**
- 输入账号密码后提示错误
- 或一直加载

**排查步骤：**

1. **打开浏览器开发者工具（F12）**

切换到 **Network（网络）** 标签，查看：
- 登录请求是否发送
- 请求的响应状态码
- 错误信息

2. **检查后端 API 是否正常**

浏览器访问：http://localhost:3000

3. **检查管理员账号是否创建**

如果是首次启动，需要创建管理员账号。查看后端日志是否有：
```
[Info] 创建默认管理员账号...
[Info] 管理员账号创建成功
```

---

### 问题4：端口被占用

**现象：**
```
Error: listen EADDRINUSE: address already in use :::3000
```

**解决方案：**

**方法一：更改端口**

修改 `backend/.env`：
```env
PORT=3001  # 改为其他端口
```

然后重启后端服务。

**方法二：释放端口**

```powershell
# 查找占用 3000 端口的进程
netstat -ano | findstr :3000

# 找到 PID 后，结束进程（替换 <PID> 为实际进程号）
taskkill /F /PID <PID>
```

---

## 📊 服务健康检查

### 完整的系统检查清单

- [ ] MySQL 服务正在运行
- [ ] 后端 Node.js 进程正在运行
- [ ] 端口 3000 正常监听
- [ ] 端口 5174 正常监听
- [ ] 可以访问 http://localhost:3000
- [ ] 可以访问 http://localhost:5174
- [ ] 可以成功登录管理后台

---

## 🎯 快速命令参考

### 查看运行的服务

```powershell
# 查看所有 Node.js 进程
Get-Process node

# 查看端口占用
netstat -ano | findstr :3000
netstat -ano | findstr :5174
```

### 停止服务

```powershell
# 停止所有 Node.js 进程
Stop-Process -Name node -Force
```

### 重启服务

**后端：**
```bash
cd score-system/backend
npm run start:dev
```

**管理后台：**
```bash
cd score-system/frontend-admin
npm run dev
```

---

## 📝 当前配置信息

### 后端 API
- **地址：** http://localhost:3000
- **配置文件：** `backend/.env`
- **数据库：** MySQL (根据 .env 配置)

### 管理后台
- **地址：** http://localhost:5174
- **默认账号：** admin / admin123
- **配置文件：** `frontend-admin/vite.config.ts`

### 数据库
- **类型：** MySQL
- **端口：** 3306
- **数据库名：** 根据 .env 中的 DATABASE_URL

---

## 🎉 成功标志

当你看到以下情况，说明系统正常运行：

1. ✅ 浏览器可以访问 http://localhost:5174
2. ✅ 看到漂亮的登录界面
3. ✅ 输入 `admin` / `admin123` 可以成功登录
4. ✅ 进入管理后台看到统计数据
5. ✅ 各个菜单页面都可以正常打开

---

**现在可以打开浏览器测试了！** 🚀

访问：http://localhost:5174




