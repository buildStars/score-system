# ğŸ² äº‘ç­–28è®¡åˆ†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº NestJS + Vue3 + MySQL çš„å…¨æ ˆåŠ æ‹¿å¤§28å½©ç¥¨è®¡åˆ†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§æŠ•æ³¨ç©æ³•ã€å®æ—¶å¼€å¥–åŒæ­¥ã€æ™ºèƒ½æ•°æ®æºåˆ‡æ¢ç­‰åŠŸèƒ½ã€‚

---

## ğŸ“‹ ç›®å½•

- [âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ğŸ› ï¸ æŠ€æœ¯æ ˆ](#ï¸-æŠ€æœ¯æ ˆ)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ“¦ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [ğŸ”§ å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [ğŸ“– APIæ–‡æ¡£](#-apiæ–‡æ¡£)
- [â“ å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

#### ç”¨æˆ·ç«¯ (H5)
- âœ… **ç”¨æˆ·ç™»å½•æ³¨å†Œ**ï¼šæ”¯æŒç”¨æˆ·å/å¯†ç ç™»å½•ï¼ŒJWTé‰´æƒ
- âœ… **å¤šç§ç©æ³•æŠ•æ³¨**ï¼š
  - å€æ•°æŠ•æ³¨ï¼ˆèµ”ç‡1.95ï¼‰
  - å¤§å°å•åŒï¼ˆèµ”ç‡1.8ï¼‰
  - ç»„åˆæŠ•æ³¨ï¼šå¤§å•/å¤§åŒ/å°å•/å°åŒï¼ˆèµ”ç‡-5å€ï¼‰
- âœ… **å®æ—¶å€’è®¡æ—¶**ï¼šç²¾ç¡®åˆ°ç§’çš„å¼€å¥–å€’è®¡æ—¶
- âœ… **æ™ºèƒ½å°ç›˜**ï¼šå¼€å¥–å‰30ç§’è‡ªåŠ¨å°ç›˜
- âœ… **ä¸‹æ³¨å†å²**ï¼šæŸ¥çœ‹ä¸ªäººæŠ•æ³¨è®°å½•å’Œç»“ç®—ç»“æœ
- âœ… **ç§¯åˆ†è®°å½•**ï¼šè¯¦ç»†çš„ç§¯åˆ†å˜åŠ¨å†å²
- âœ… **å…¬å‘Šé€šçŸ¥**ï¼šæŸ¥çœ‹ç³»ç»Ÿå…¬å‘Šå’Œé‡è¦é€šçŸ¥

#### ç®¡ç†ç«¯
- âœ… **ç”¨æˆ·ç®¡ç†**ï¼šç”¨æˆ·åˆ—è¡¨ã€çŠ¶æ€ç®¡ç†ã€ç§¯åˆ†è°ƒæ•´
- âœ… **æŠ•æ³¨ç®¡ç†**ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ•æ³¨è®°å½•ã€ç»Ÿè®¡æ•°æ®
- âœ… **å¼€å¥–ç®¡ç†**ï¼šæŸ¥çœ‹å¼€å¥–å†å²ã€æ‰‹åŠ¨è§¦å‘åŒæ­¥
- âœ… **ç³»ç»Ÿè®¾ç½®**ï¼šæŠ•æ³¨è§„åˆ™é…ç½®ã€è´¹ç‡è°ƒæ•´
- âœ… **å…¬å‘Šç®¡ç†**ï¼šå‘å¸ƒ/ç¼–è¾‘/åˆ é™¤ç³»ç»Ÿå…¬å‘Š
- âœ… **æ•°æ®ç»Ÿè®¡**ï¼šå®æ—¶ç»Ÿè®¡ç”¨æˆ·æ•°ã€æŠ•æ³¨é¢ã€ç›ˆäºç­‰

#### åç«¯æœåŠ¡
- âœ… **å¤šæ•°æ®æºæ”¯æŒ**ï¼šJND28ã€USA28åŒæ•°æ®æºï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»
- âœ… **æ™ºèƒ½åŒæ­¥æœºåˆ¶**ï¼š
  - å¼€å¥–å60ç§’å¯†é›†æ£€æµ‹ï¼ˆæ¯5ç§’ï¼‰
  - å¹³æ—¶å¸¸è§„æ£€æµ‹ï¼ˆæ¯60ç§’ï¼‰
  - æ•°æ®æ–°é²œåº¦æ£€æµ‹ï¼Œè‡ªåŠ¨åˆ‡æ¢æ•°æ®æº
- âœ… **è‡ªåŠ¨ç»“ç®—**ï¼šå¼€å¥–åè‡ªåŠ¨ç»“ç®—æ‰€æœ‰æŠ•æ³¨
- âœ… **äº¤æ˜“è®°å½•**ï¼šå®Œæ•´çš„ç§¯åˆ†å˜åŠ¨å®¡è®¡æ—¥å¿—
- âœ… **æƒé™æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰

### ğŸ¨ ç‰¹è‰²åŠŸèƒ½

- **åŠ¨æ€é…ç½®**ï¼šæŠ•æ³¨è§„åˆ™ã€è´¹ç‡ã€èµ”ç‡ç­‰å¯é€šè¿‡ç®¡ç†ç«¯åŠ¨æ€è°ƒæ•´
- **å°æ•°ç²¾åº¦**ï¼šä½¿ç”¨ Prisma.Decimal ç¡®ä¿é‡‘é¢è®¡ç®—ç²¾åº¦
- **å¾ªç¯é‡è¯•**ï¼šæ•°æ®æºå¤±è´¥æ—¶è‡ªåŠ¨å¾ªç¯é‡è¯•å¤šè½®
- **å®¹é”™æœºåˆ¶**ï¼šå‰ç«¯è½®è¯¢é”™è¯¯å¤„ç†ï¼Œé¿å…è¿ç»­å¤±è´¥
- **å“åº”å¼è®¾è®¡**ï¼šH5ç«¯å®Œç¾é€‚é…ç§»åŠ¨è®¾å¤‡

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: NestJS 10.x (Node.js 20+)
- **æ•°æ®åº“**: MySQL 8.0
- **ORM**: Prisma 5.x
- **ç¼“å­˜**: Redis 7.x
- **å®šæ—¶ä»»åŠ¡**: @nestjs/schedule
- **è®¤è¯**: JWT (Passport)
- **æ–‡æ¡£**: Swagger/OpenAPI

### å‰ç«¯ (H5)
- **æ¡†æ¶**: Vue 3 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 5.x
- **UIç»„ä»¶**: Vant 4.x
- **çŠ¶æ€ç®¡ç†**: Pinia
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ ·å¼**: Less + CSS3

### ç®¡ç†ç«¯
- **æ¡†æ¶**: Vue 3 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 5.x
- **UIç»„ä»¶**: Element Plus
- **å›¾è¡¨**: ECharts 5.x
- **HTTPå®¢æˆ·ç«¯**: Axios

### DevOps
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åå‘ä»£ç†**: Nginx
- **è¿›ç¨‹ç®¡ç†**: PM2
- **CI/CD**: ä¸€é”®éƒ¨ç½²è„šæœ¬

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
score-system/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/          # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ user/          # ç”¨æˆ·æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ bet/           # æŠ•æ³¨æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ lottery/       # å¼€å¥–æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ system/        # ç³»ç»Ÿé…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ message/       # æ¶ˆæ¯å…¬å‘Š
â”‚   â”‚   â”œâ”€â”€ common/            # å…¬å…±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ prisma/            # Prismaé…ç½®
â”‚   â”‚   â””â”€â”€ main.ts            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ schema.prisma      # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â””â”€â”€ seed.ts            # åˆå§‹æ•°æ®
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend-h5/                # H5ç”¨æˆ·ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend-admin/             # ç®¡ç†åå°
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docker-compose.yml          # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ deploy-backend.sh          # åç«¯éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy-h5.sh               # H5éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy-admin.sh            # ç®¡ç†ç«¯éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy-all.sh              # ä¸€é”®å…¨éƒ¨ç½²
â””â”€â”€ README.md
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- Node.js 20+ (æœ¬åœ°å¼€å‘)
- MySQL 8.0+ (æœ¬åœ°å¼€å‘)

### æ–¹å¼ä¸€ï¼šDocker ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd score-system
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“å¯†ç ã€JWTå¯†é’¥ç­‰
```

#### 3. ä¸€é”®å¯åŠ¨

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker exec -it score-system-backend sh

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate deploy

# åˆå§‹åŒ–ç§å­æ•°æ®
npx prisma db seed

# é€€å‡ºå®¹å™¨
exit
```

#### 5. è®¿é—®ç³»ç»Ÿ

- **H5ç”¨æˆ·ç«¯**: http://localhost:5173
- **ç®¡ç†åå°**: http://localhost:5174
- **APIæ–‡æ¡£**: http://localhost:3000/api-docs

**é»˜è®¤ç®¡ç†å‘˜è´¦å·**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

---

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

#### 1. å®‰è£…ä¾èµ–

```bash
# åç«¯
cd backend
npm install

# H5å‰ç«¯
cd ../frontend-h5
npm install

# ç®¡ç†ç«¯
cd ../frontend-admin
npm install
```

#### 2. é…ç½®æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p
CREATE DATABASE score_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# é…ç½® backend/.env
DATABASE_URL="mysql://root:password@localhost:3306/score_system"
```

#### 3. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
cd backend
npx prisma migrate dev
npx prisma db seed
```

#### 4. å¯åŠ¨æœåŠ¡

```bash
# åç«¯ï¼ˆç»ˆç«¯1ï¼‰
cd backend
npm run start:dev

# H5å‰ç«¯ï¼ˆç»ˆç«¯2ï¼‰
cd frontend-h5
npm run dev

# ç®¡ç†ç«¯ï¼ˆç»ˆç«¯3ï¼‰
cd frontend-admin
npm run dev
```

---

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. æœåŠ¡å™¨å‡†å¤‡

```bash
# å®‰è£… Docker
curl -fsSL https://get.docker.com | sh
sudo systemctl enable docker
sudo systemctl start docker

# å®‰è£… Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

#### 2. ä¸Šä¼ é¡¹ç›®

```bash
# å‹ç¼©é¡¹ç›®
tar -czf score-system.tar.gz score-system/

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp score-system.tar.gz user@server:/root/

# è§£å‹
ssh user@server
cd /root
tar -xzf score-system.tar.gz
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
cd /root/score-system
cp .env.example .env
vim .env
```

**é‡è¦é…ç½®**:
```env
# æ•°æ®åº“
MYSQL_ROOT_PASSWORD=ä½ çš„å¼ºå¯†ç 
MYSQL_PASSWORD=ä½ çš„å¼ºå¯†ç 

# JWT
JWT_SECRET=ä½ çš„éšæœºå¯†é’¥ï¼ˆè‡³å°‘32ä½ï¼‰

# ç«¯å£ï¼ˆå¯é€‰ï¼‰
BACKEND_PORT=3000
H5_PORT=5173
ADMIN_PORT=5174
```

#### 4. ä¸€é”®éƒ¨ç½²

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x deploy-*.sh

# éƒ¨ç½²æ‰€æœ‰æœåŠ¡
./deploy-all.sh

# æˆ–åˆ†åˆ«éƒ¨ç½²
./deploy-backend.sh   # åªéƒ¨ç½²åç«¯
./deploy-h5.sh        # åªéƒ¨ç½²H5
./deploy-admin.sh     # åªéƒ¨ç½²ç®¡ç†ç«¯
```

#### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿›å…¥æ•°æ®åº“å®¹å™¨
docker exec -it score-system-mysql mysql -u root -p

# ä½¿ç”¨æ•°æ®åº“
USE score_system;

# ä¿®å¤ Decimal å­—æ®µç²¾åº¦ï¼ˆé‡è¦ï¼ï¼‰
ALTER TABLE bets MODIFY COLUMN fee DECIMAL(10,2) NOT NULL DEFAULT 0.00;
ALTER TABLE bets MODIFY COLUMN result_amount DECIMAL(10,2) NULL DEFAULT NULL;

exit;
```

#### 6. é…ç½®é˜²ç«å¢™

```bash
# å…è®¸HTTP/HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# å…è®¸åº”ç”¨ç«¯å£
sudo ufw allow 3000/tcp
sudo ufw allow 5173/tcp
sudo ufw allow 5174/tcp

sudo ufw enable
```

#### 7. é…ç½®Nginxåå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

```nginx
# /etc/nginx/sites-available/score-system
server {
    listen 80;
    server_name your-domain.com;

    # H5å‰ç«¯
    location / {
        proxy_pass http://localhost:5173;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # ç®¡ç†åå°
    location /admin {
        proxy_pass http://localhost:5174;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # API
    location /api {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## ğŸ”§ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

#### æ·»åŠ æ–°æ¨¡å—

```bash
cd backend
nest g module modules/your-module
nest g controller modules/your-module
nest g service modules/your-module
```

#### æ•°æ®åº“è¿ç§»

```bash
# åˆ›å»ºè¿ç§»
npx prisma migrate dev --name your_migration_name

# åº”ç”¨è¿ç§»
npx prisma migrate deploy

# é‡ç½®æ•°æ®åº“
npx prisma migrate reset
```

#### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
npm run test

# E2Eæµ‹è¯•
npm run test:e2e

# æµ‹è¯•è¦†ç›–ç‡
npm run test:cov
```

### å‰ç«¯å¼€å‘

#### æ·»åŠ æ–°é¡µé¢

```typescript
// frontend-h5/src/router/index.ts
{
  path: '/your-page',
  name: 'YourPage',
  component: () => import('@/views/YourPage.vue'),
  meta: { requiresAuth: true }
}
```

#### è°ƒç”¨API

```typescript
// frontend-h5/src/api/your-api.ts
import request from './request'

export const yourApi = {
  getData: () => request.get('/api/your-endpoint'),
  postData: (data) => request.post('/api/your-endpoint', data),
}
```

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend
docker-compose logs -f frontend-h5
docker-compose logs -f frontend-admin

# é‡å¯æœåŠ¡
docker-compose restart backend
docker-compose restart frontend-h5

# è¿›å…¥å®¹å™¨
docker exec -it score-system-backend sh
docker exec -it score-system-mysql mysql -u root -p

# æ¸…ç†æ•°æ®
docker-compose down -v  # âš ï¸ ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®
```

---

## ğŸ“– APIæ–‡æ¡£

### Swaggeræ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åï¼Œè®¿é—®ï¼š
```
http://localhost:3000/api-docs
```

### ä¸»è¦APIç«¯ç‚¹

#### è®¤è¯
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/admin/login` - ç®¡ç†å‘˜ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ

#### ç”¨æˆ·
- `GET /api/user/profile` - è·å–ä¸ªäººä¿¡æ¯
- `PUT /api/user/profile` - æ›´æ–°ä¸ªäººä¿¡æ¯
- `GET /api/user/bet-history` - æŠ•æ³¨å†å²
- `GET /api/user/point-records` - ç§¯åˆ†è®°å½•

#### æŠ•æ³¨
- `POST /api/user/bet` - åˆ›å»ºæŠ•æ³¨
- `DELETE /api/user/cancel-bet` - å–æ¶ˆæŠ•æ³¨
- `GET /api/user/current-issue-bets` - å½“å‰æœŸæŠ•æ³¨

#### å¼€å¥–
- `GET /api/lottery/current-issue` - å½“å‰æœŸä¿¡æ¯
- `GET /api/lottery/results` - å¼€å¥–å†å²
- `GET /api/lottery/countdown` - å€’è®¡æ—¶

#### ç®¡ç†ç«¯
- `GET /api/admin/users` - ç”¨æˆ·åˆ—è¡¨
- `POST /api/admin/users/:id/adjust-points` - è°ƒæ•´ç§¯åˆ†
- `GET /api/admin/bets` - æŠ•æ³¨è®°å½•
- `GET /api/admin/statistics` - ç»Ÿè®¡æ•°æ®

---

## â“ å¸¸è§é—®é¢˜

### Q: Docker å®¹å™¨å¯åŠ¨å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥ç«¯å£å ç”¨å’Œæ—¥å¿—

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo lsof -i :3000
sudo lsof -i :5173
sudo lsof -i :5174

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs backend
```

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥é…ç½®å’Œå®¹å™¨çŠ¶æ€

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker exec -it score-system-mysql mysql -u root -p

# æ£€æŸ¥ç¯å¢ƒå˜é‡
docker exec score-system-backend env | grep DATABASE
```

### Q: å‰ç«¯APIè¯·æ±‚å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥åç«¯æœåŠ¡å’ŒAPIåœ°å€

```bash
# æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:3000/api-docs

# æ£€æŸ¥å‰ç«¯ç¯å¢ƒå˜é‡
cat frontend-h5/.env.production
```

### Q: æ‰‹ç»­è´¹/ç»“ç®—é‡‘é¢æ˜¾ç¤ºä¸æ­£ç¡®ï¼Ÿ

**A**: æ‰§è¡Œæ•°æ®åº“å­—æ®µä¿®å¤

```sql
USE score_system;

-- ä¿®å¤ fee å­—æ®µ
ALTER TABLE bets MODIFY COLUMN fee DECIMAL(10,2) NOT NULL DEFAULT 0.00;

-- ä¿®å¤ result_amount å­—æ®µ
ALTER TABLE bets MODIFY COLUMN result_amount DECIMAL(10,2) NULL DEFAULT NULL;
```

### Q: æ•°æ®æºåˆ‡æ¢ä¸ç”Ÿæ•ˆï¼Ÿ

**A**: æ£€æŸ¥æ•°æ®æºé…ç½®

```bash
# æŸ¥çœ‹æ•°æ®æºæ—¥å¿—
docker logs -f score-system-backend | grep "æ•°æ®æº"

# æ‰‹åŠ¨è§¦å‘åŒæ­¥
curl -X POST http://localhost:3000/api/admin/lottery/sync \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### Q: å¦‚ä½•æ¸…ç©ºæµ‹è¯•æ•°æ®ï¼Ÿ

**A**: ä½¿ç”¨ç®¡ç†ç«¯çš„æ¸…ç©ºåŠŸèƒ½æˆ–æ‰‹åŠ¨æ¸…ç†

```bash
# è¿›å…¥æ•°æ®åº“
docker exec -it score-system-mysql mysql -u root -p

USE score_system;

-- æ¸…ç©ºæŠ•æ³¨è®°å½•
TRUNCATE TABLE bets;

-- æ¸…ç©ºå¼€å¥–è®°å½•
TRUNCATE TABLE lottery_results;

-- æ¸…ç©ºç§¯åˆ†è®°å½•
TRUNCATE TABLE point_records;

-- é‡ç½®ç”¨æˆ·ç§¯åˆ†
UPDATE users SET points = 10000 WHERE role = 'user';
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ã€‚

---

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- Issue: [GitHub Issues](https://github.com/your-repo/issues)
- Email: your-email@example.com

---

**æœ€åæ›´æ–°**: 2025-11-30
