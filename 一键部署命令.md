# ğŸš€ ä¸€é”®éƒ¨ç½²å‘½ä»¤

æœ¬æ–‡æ¡£æä¾›åç«¯ã€H5å‰ç«¯ã€ç®¡ç†åå°çš„ä¸€é”®éƒ¨ç½²å‘½ä»¤ï¼Œå¤åˆ¶å³å¯ä½¿ç”¨ã€‚

---

## ğŸ“¦ 1. åç«¯ä¸€é”®éƒ¨ç½²

### Docker ç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
cd /path/to/score-system && \
docker-compose down && \
docker-compose build backend && \
docker-compose up -d && \
echo "âœ… åç«¯éƒ¨ç½²å®Œæˆï¼" && \
docker-compose logs -f backend
```

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
cd /path/to/score-system/backend && \
npm run build && \
pm2 restart score-system-backend || npm run start:prod
```

---

## ğŸ“± 2. H5å‰ç«¯ä¸€é”®éƒ¨ç½²

### æ–¹å¼1ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
cd /path/to/score-system && \
docker-compose down frontend-h5 && \
docker-compose build frontend-h5 && \
docker-compose up -d frontend-h5 && \
echo "âœ… H5å‰ç«¯éƒ¨ç½²å®Œæˆï¼è®¿é—®åœ°å€ï¼šhttp://your-domain:8080" && \
docker-compose logs -f frontend-h5
```

### æ–¹å¼2ï¼šé™æ€æ–‡ä»¶éƒ¨ç½²ï¼ˆNginxï¼‰

```bash
cd /path/to/score-system/frontend-h5 && \
npm run build && \
rm -rf /var/www/h5/* && \
cp -r dist/* /var/www/h5/ && \
nginx -s reload && \
echo "âœ… H5å‰ç«¯éƒ¨ç½²å®Œæˆï¼"
```

---

## ğŸ’¼ 3. ç®¡ç†åå°ä¸€é”®éƒ¨ç½²

### æ–¹å¼1ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
cd /path/to/score-system && \
docker-compose down frontend-admin && \
docker-compose build frontend-admin && \
docker-compose up -d frontend-admin && \
echo "âœ… ç®¡ç†åå°éƒ¨ç½²å®Œæˆï¼è®¿é—®åœ°å€ï¼šhttp://your-domain:8081" && \
docker-compose logs -f frontend-admin
```

### æ–¹å¼2ï¼šé™æ€æ–‡ä»¶éƒ¨ç½²ï¼ˆNginxï¼‰

```bash
cd /path/to/score-system/frontend-admin && \
npm run build && \
rm -rf /var/www/admin/* && \
cp -r dist/* /var/www/admin/ && \
nginx -s reload && \
echo "âœ… ç®¡ç†åå°éƒ¨ç½²å®Œæˆï¼"
```

---

## ğŸ¯ 4. å…¨æ ˆä¸€é”®éƒ¨ç½²

å¦‚æœéœ€è¦**åŒæ—¶éƒ¨ç½²æ‰€æœ‰æœåŠ¡**ï¼š

```bash
cd /path/to/score-system && \
docker-compose down && \
docker-compose build && \
docker-compose up -d && \
echo "âœ… å…¨æ ˆéƒ¨ç½²å®Œæˆï¼" && \
docker-compose ps && \
echo "\nğŸ“‹ æŸ¥çœ‹åç«¯æ—¥å¿—ï¼šdocker-compose logs -f backend" && \
echo "ğŸ“‹ æŸ¥çœ‹H5æ—¥å¿—ï¼šdocker-compose logs -f frontend-h5" && \
echo "ğŸ“‹ æŸ¥çœ‹ç®¡ç†åå°æ—¥å¿—ï¼šdocker-compose logs -f frontend-admin"
```

---

## ğŸ” 5. éƒ¨ç½²åéªŒè¯

### æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹åç«¯æ—¥å¿—
docker-compose logs -f backend

# æŸ¥çœ‹H5å‰ç«¯æ—¥å¿—
docker-compose logs -f frontend-h5

# æŸ¥çœ‹ç®¡ç†åå°æ—¥å¿—
docker-compose logs -f frontend-admin
```

### æ£€æŸ¥ç«¯å£

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep -E '3000|8080|8081|3306'

# æˆ–ä½¿ç”¨ ss å‘½ä»¤
ss -tulpn | grep -E '3000|8080|8081|3306'
```

### è®¿é—®åœ°å€

- **åç«¯API**ï¼š`http://your-domain:3000`
- **H5å‰ç«¯**ï¼š`http://your-domain:8080`
- **ç®¡ç†åå°**ï¼š`http://your-domain:8081`
- **æ•°æ®åº“**ï¼š`localhost:3306`ï¼ˆä»…æœ¬åœ°è®¿é—®ï¼‰

---

## âš¡ 6. å¿«é€Ÿå›æ»šï¼ˆå¦‚æœéƒ¨ç½²å¤±è´¥ï¼‰

### å›æ»šåç«¯

```bash
cd /path/to/score-system && \
git checkout HEAD~1 backend/ && \
docker-compose build backend && \
docker-compose up -d backend && \
echo "âœ… åç«¯å·²å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼"
```

### å›æ»šH5å‰ç«¯

```bash
cd /path/to/score-system && \
git checkout HEAD~1 frontend-h5/ && \
docker-compose build frontend-h5 && \
docker-compose up -d frontend-h5 && \
echo "âœ… H5å‰ç«¯å·²å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼"
```

### å›æ»šç®¡ç†åå°

```bash
cd /path/to/score-system && \
git checkout HEAD~1 frontend-admin/ && \
docker-compose build frontend-admin && \
docker-compose up -d frontend-admin && \
echo "âœ… ç®¡ç†åå°å·²å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼"
```

---

## ğŸ“ 7. Windows PowerShell å‘½ä»¤

### åç«¯éƒ¨ç½²ï¼ˆWindowsï¼‰

```powershell
cd D:\download\yunce\yunce\score-system; `
docker-compose down; `
docker-compose build backend; `
docker-compose up -d; `
Write-Host "âœ… åç«¯éƒ¨ç½²å®Œæˆï¼" -ForegroundColor Green; `
docker-compose logs -f backend
```

### H5å‰ç«¯éƒ¨ç½²ï¼ˆWindowsï¼‰

```powershell
cd D:\download\yunce\yunce\score-system; `
docker-compose down frontend-h5; `
docker-compose build frontend-h5; `
docker-compose up -d frontend-h5; `
Write-Host "âœ… H5å‰ç«¯éƒ¨ç½²å®Œæˆï¼" -ForegroundColor Green; `
docker-compose logs -f frontend-h5
```

### ç®¡ç†åå°éƒ¨ç½²ï¼ˆWindowsï¼‰

```powershell
cd D:\download\yunce\yunce\score-system; `
docker-compose down frontend-admin; `
docker-compose build frontend-admin; `
docker-compose up -d frontend-admin; `
Write-Host "âœ… ç®¡ç†åå°éƒ¨ç½²å®Œæˆï¼" -ForegroundColor Green; `
docker-compose logs -f frontend-admin
```

---

## ğŸ› ï¸ 8. å¸¸è§é—®é¢˜æ’æŸ¥

### 1. ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3000  # åç«¯
lsof -i :8080  # H5å‰ç«¯
lsof -i :8081  # ç®¡ç†åå°

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>
```

### 2. å®¹å™¨å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend-h5
docker-compose logs frontend-admin

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend
docker-compose restart frontend-h5
docker-compose restart frontend-admin
```

### 3. æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²

```bash
# æ¸…ç†æ‰€æœ‰å®¹å™¨ã€é•œåƒã€å·
cd /path/to/score-system && \
docker-compose down -v && \
docker system prune -f && \
docker-compose build --no-cache && \
docker-compose up -d && \
echo "âœ… æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²å®Œæˆï¼"
```

---

## ğŸ“Œ 9. éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æäº¤åˆ° Git
- [ ] `.env` é…ç½®æ–‡ä»¶å·²æ›´æ–°
- [ ] æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
- [ ] é˜²ç«å¢™å·²å¼€æ”¾å¿…è¦ç«¯å£ï¼ˆ3000, 8080, 8081ï¼‰
- [ ] Docker å’Œ Docker Compose å·²å®‰è£…
- [ ] ç£ç›˜ç©ºé—´å……è¶³ï¼ˆè‡³å°‘ 5GBï¼‰
- [ ] å·²å¤‡ä»½æ•°æ®åº“

---

## ğŸ‰ 10. éƒ¨ç½²æˆåŠŸç¡®è®¤

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ç¡®è®¤ï¼š

1. **åç«¯å¥åº·æ£€æŸ¥**ï¼š`http://your-domain:3000/api/health`
2. **H5å‰ç«¯**ï¼š`http://your-domain:8080`
3. **ç®¡ç†åå°**ï¼š`http://your-domain:8081`

å¦‚æœå…¨éƒ¨æ­£å¸¸è®¿é—®ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼ğŸŠ






