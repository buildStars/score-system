# 📱 H5用户端项目说明

## ✅ 项目已完成

恭喜！前端H5项目已经全部开发完成，可以正常使用了。

---

## 📂 项目结构

```
frontend-h5/
├── public/                     # 静态资源
├── src/
│   ├── api/                   # API接口
│   │   ├── index.ts          # API统一导出
│   │   ├── request.ts        # Axios封装
│   │   ├── user.ts           # 用户相关API
│   │   └── lottery.ts        # 开奖相关API
│   ├── assets/               # 资源文件
│   │   └── styles/           # 全局样式
│   │       ├── variables.scss
│   │       └── index.scss
│   ├── router/               # 路由配置
│   │   └── index.ts
│   ├── stores/               # Pinia状态管理
│   │   ├── index.ts          # Store配置
│   │   ├── user.ts           # 用户Store
│   │   └── lottery.ts        # 开奖Store
│   ├── types/                # TypeScript类型
│   │   ├── api.ts
│   │   ├── user.ts
│   │   └── bet.ts
│   ├── utils/                # 工具函数
│   │   ├── format.ts         # 格式化工具
│   │   └── validate.ts       # 验证工具
│   ├── views/                # 页面组件
│   │   ├── Login.vue         # ✅ 登录页
│   │   ├── Home.vue          # ✅ 首页（下注）
│   │   ├── History.vue       # ✅ 开奖历史
│   │   ├── PointRecords.vue  # ✅ 积分记录
│   │   └── Profile.vue       # ✅ 个人中心
│   ├── App.vue               # 根组件
│   ├── main.ts               # 入口文件
│   └── vite-env.d.ts         # 类型声明
├── .gitignore
├── index.html
├── package.json
├── tsconfig.json
├── vite.config.ts
└── README.md
```

---

## 🎯 已实现功能

### 1. ✅ 用户登录（Login.vue）
- 用户名密码登录
- JWT Token认证
- 表单验证
- 登录状态持久化
- 自动跳转（登录后返回之前页面）

### 2. ✅ 首页下注（Home.vue）
- 显示当前积分和期号
- 实时倒计时
- 上期开奖结果展示
- **倍数下注**：
  - 输入下注倍数
  - 自动计算手续费
  - 回本规则提示
- **组合下注**：
  - 8种组合选择（大、小、单、双、大单、大双、小单、小双）
  - 输入下注金额
  - 自动计算手续费
- 下注确认弹窗
- 积分实时更新
- 游戏开关控制

### 3. ✅ 开奖历史（History.vue）
- 开奖记录列表
- 期号搜索功能
- 下拉刷新
- 分页加载
- 显示开奖号码、总和、大小单双
- 回本标记

### 4. ✅ 积分记录（PointRecords.vue）
- 积分变动记录
- 类型筛选（充值/扣款/下注/中奖/手续费等）
- 显示余额变动
- 下拉刷新
- 分页加载

### 5. ✅ 个人中心（Profile.vue）
- 用户信息展示
- 积分统计（当前积分、累计下注、总盈亏）
- 功能菜单（下注历史、积分记录、开奖历史）
- 修改密码
- 退出登录

### 6. ✅ 底部导航栏
- 首页、历史、积分、我的
- 路由联动
- 高亮当前页面

---

## 🛠️ 技术实现

### 核心技术栈
- **框架**：Vue 3.4+ (Composition API + `<script setup>`)
- **UI库**：Vant UI 4.x（自动按需引入）
- **路由**：Vue Router 4.x（路由守卫、登录拦截）
- **状态管理**：Pinia（状态持久化）
- **HTTP**：Axios（请求/响应拦截器、错误处理）
- **构建**：Vite 5.x
- **语言**：TypeScript 5.x
- **样式**：Sass/SCSS

### 关键特性
1. **TypeScript类型系统**
   - 完整的类型定义
   - 接口类型约束
   - 自动类型推导

2. **Axios封装**
   - 统一请求/响应处理
   - Token自动注入
   - 错误统一处理
   - 401自动跳转登录

3. **路由守卫**
   - 登录状态检查
   - 未登录自动跳转
   - 页面标题设置
   - 重定向功能

4. **状态管理**
   - Pinia stores
   - LocalStorage持久化
   - 响应式数据

5. **工具函数**
   - 日期时间格式化
   - 金额格式化
   - 表单验证
   - 期号格式化

6. **UI组件**
   - Vant组件自动按需引入
   - 移动端适配
   - 美观的UI设计
   - 流畅的交互体验

---

## 🚀 启动项目

### 开发模式
```bash
npm run dev
```
访问：http://localhost:5173

### 生产构建
```bash
npm run build
```

### 预览构建结果
```bash
npm run preview
```

---

## 🔧 配置说明

### API地址配置
开发环境默认代理到 `http://localhost:8081`

如需修改，请编辑：
- `vite.config.ts` 中的 proxy 配置
- 或直接在 `.env.development` 中修改（如果文件可编辑）

### 后端接口地址
默认配置：
```
开发环境：http://localhost:8081
生产环境：需在部署时配置
```

---

## 📡 API接口

项目使用的主要接口：

### 用户相关
- `POST /userApi/login` - 用户登录
- `GET /userApi/info` - 获取用户信息
- `POST /userApi/change-password` - 修改密码
- `POST /userApi/bet` - 提交下注
- `GET /userApi/bet-history` - 下注历史
- `GET /userApi/point-records` - 积分记录

### 开奖相关
- `GET /userApi/current` - 获取当前期信息
- `GET /userApi/history` - 开奖历史

详细接口文档请查看：`../docs/API接口文档.md`

---

## 🎨 样式说明

### 主题色
- 主色调：#1989fa（蓝色）
- 成功色：#07c160（绿色）
- 警告色：#ff976a（橙色）
- 危险色：#ee0a24（红色）

### 响应式设计
- 使用Vant的设计规范
- 完美适配移动端
- 支持各种屏幕尺寸

---

## 🔐 安全性

1. **JWT Token认证**
   - Token存储在localStorage
   - 请求自动携带Token
   - Token过期自动跳转登录

2. **表单验证**
   - 前端验证
   - 后端验证
   - 错误提示

3. **路由守卫**
   - 未登录拦截
   - 权限检查

---

## ✨ 亮点功能

### 1. 实时倒计时
- 自动同步服务器时间
- 倒计时结束自动刷新
- 平滑的倒计时动画

### 2. 智能下注
- 自动计算手续费
- 积分余额检查
- 二次确认机制

### 3. 数据刷新
- 下拉刷新
- 自动加载更多
- 实时更新用户积分

### 4. 用户体验
- 加载状态提示
- 错误友好提示
- 流畅的页面切换
- 美观的UI设计

---

## 📝 使用建议

### 测试账号
请联系管理员获取测试账号

### 开发调试
1. 确保后端服务已启动（端口8081）
2. 启动前端开发服务器
3. 打开浏览器开发者工具
4. 使用手机模式查看

### 部署注意事项
1. 修改生产环境API地址
2. 执行 `npm run build`
3. 将 `dist` 目录部署到服务器
4. 配置Nginx代理

---

## 🐛 已知问题

暂无已知问题

---

## 🔄 后续优化建议

1. **性能优化**
   - 图片懒加载
   - 路由懒加载
   - 组件按需加载

2. **功能增强**
   - 下注记录详情页
   - 数据统计图表
   - 消息推送

3. **用户体验**
   - 骨架屏加载
   - 手势操作
   - 音效提示

---

## 📞 技术支持

如有问题，请查看：
- 项目文档：`../docs/`
- API文档：`../docs/API接口文档.md`
- 业务规则：`../docs/业务规则详解.md`

---

**项目版本**：v1.0  
**开发日期**：2024年11月26日  
**状态**：✅ 已完成，可正常使用

祝使用愉快！🎉





