# 🧪 H5前端完整功能测试指南

## 📋 测试准备

### 1. 环境检查
- [ ] 后端服务：http://localhost:3000 ✅
- [ ] H5前端：http://localhost:5173 ✅
- [ ] 数据库：MySQL连接正常 ✅
- [ ] 测试账号已创建 ✅

### 2. 测试工具
- Chrome DevTools（F12）
- Network面板（查看API请求）
- Console面板（查看日志和错误）
- Vue DevTools（查看组件状态）
- 手机模式（模拟移动设备）

### 3. 测试账号
```
用户账号：user001
密码：123456
初始积分：5000
```

---

## 🎯 完整测试流程

### 模块1：登录模块测试

#### 测试1-1：正常登录
**步骤**：
1. 访问 http://localhost:5173/login
2. 输入用户名：user001
3. 输入密码：123456
4. 点击"登录"按钮

**预期结果**：
- [ ] 显示加载状态
- [ ] 请求 `POST /api/user/login` 成功（200）
- [ ] 提示"登录成功"
- [ ] 自动跳转到首页
- [ ] Token保存到localStorage
- [ ] 用户信息保存到Pinia

#### 测试1-2：错误密码
**步骤**：
1. 输入错误密码
2. 点击登录

**预期结果**：
- [ ] 提示"用户名或密码错误"
- [ ] 不跳转页面
- [ ] 不保存Token

#### 测试1-3：空字段验证
**步骤**：
1. 不输入用户名或密码
2. 点击登录

**预期结果**：
- [ ] 表单验证提示
- [ ] 不发送请求

#### 测试1-4：登录后访问登录页
**步骤**：
1. 已登录状态
2. 访问 `/login`

**预期结果**：
- [ ] 自动跳转到首页

---

### 模块2：首页模块测试

#### 测试2-1：页面加载
**步骤**：
1. 登录成功后进入首页

**预期结果**：
- [ ] 页面正常渲染
- [ ] 请求 `GET /api/user/info` 成功
- [ ] 请求 `GET /api/lottery/current` 成功
- [ ] 显示当前积分
- [ ] 显示当前期号
- [ ] 倒计时正常运行
- [ ] 上期开奖结果显示

#### 测试2-2：倍数下注
**步骤**：
1. 切换到"倍数下注"
2. 输入倍数：100
3. 查看手续费计算
4. 点击"确认下注"
5. 确认弹窗
6. 点击"确认"

**预期结果**：
- [ ] 手续费显示：3.00
- [ ] 弹窗显示：下注内容100、金额100、手续费3
- [ ] 请求 `POST /api/user/bet` 成功
- [ ] 提示"下注成功"
- [ ] 积分减少（5000 → 4897）
- [ ] 表单清空
- [ ] 用户信息自动刷新

#### 测试2-3：组合下注
**步骤**：
1. 切换到"组合下注"
2. 选择"大"
3. 输入金额：100
4. 查看手续费
5. 点击"确认下注"
6. 确认提交

**预期结果**：
- [ ] 手续费显示：5.00
- [ ] 弹窗显示：下注内容"大"、金额100、手续费5
- [ ] 请求成功
- [ ] 积分减少
- [ ] 表单清空

#### 测试2-4：积分不足
**步骤**：
1. 输入超过当前积分的金额
2. 尝试下注

**预期结果**：
- [ ] 提示"积分不足"
- [ ] 不发送请求

#### 测试2-5：倒计时结束
**步骤**：
1. 等待倒计时结束（或手动修改countdown为5秒）
2. 观察行为

**预期结果**：
- [ ] 提示"本期已截止，正在开奖..."
- [ ] 2秒后自动刷新数据
- [ ] 加载新的期号和倒计时

#### 测试2-6：系统公告
**步骤**：
1. 查看页面顶部

**预期结果**：
- [ ] 显示公告栏
- [ ] 内容滚动播放

#### 测试2-7：游戏暂停
**步骤**：
1. 管理员关闭游戏
2. 刷新首页

**预期结果**：
- [ ] 下注按钮显示"游戏已暂停"
- [ ] 按钮禁用
- [ ] 无法下注

---

### 模块3：开奖历史测试

#### 测试3-1：列表加载
**步骤**：
1. 点击底部"历史"
2. 进入开奖历史页面

**预期结果**：
- [ ] 自动加载第一页数据
- [ ] 请求 `GET /api/lottery/history` 成功
- [ ] 显示开奖记录列表
- [ ] 每条记录信息完整

#### 测试3-2：期号搜索
**步骤**：
1. 在搜索框输入期号：3330421
2. 等待500ms防抖
3. 或点击搜索按钮

**预期结果**：
- [ ] 500ms后自动搜索
- [ ] 只显示该期号的记录
- [ ] 如果没有，显示空状态

#### 测试3-3：清空搜索
**步骤**：
1. 搜索后点击清空按钮

**预期结果**：
- [ ] 搜索框清空
- [ ] 重新加载所有数据

#### 测试3-4：下拉刷新
**步骤**：
1. 向下滑动页面
2. 在顶部下拉

**预期结果**：
- [ ] 显示刷新动画
- [ ] 重新加载第一页
- [ ] 数据更新

#### 测试3-5：上拉加载更多
**步骤**：
1. 向下滚动到列表底部

**预期结果**：
- [ ] 自动加载下一页
- [ ] 数据追加到列表末尾
- [ ] 显示加载状态
- [ ] 全部加载完显示"没有更多了"

#### 测试3-6：骨架屏
**步骤**：
1. 清除缓存
2. 首次进入页面

**预期结果**：
- [ ] 显示3个骨架屏
- [ ] 数据加载后隐藏

---

### 模块4：积分记录测试

#### 测试4-1：列表加载
**步骤**：
1. 点击底部"积分"
2. 进入积分记录页面

**预期结果**：
- [ ] 自动加载第一页数据
- [ ] 请求 `GET /api/user/point-records` 成功
- [ ] 显示积分记录列表
- [ ] 金额颜色正确（正数绿色、负数红色）

#### 测试4-2：类型筛选
**步骤**：
1. 点击顶部筛选器
2. 选择"下注"
3. 选择"中奖"
4. 选择"全部类型"

**预期结果**：
- [ ] 筛选器正常展开
- [ ] 选择后自动刷新列表
- [ ] 只显示对应类型的记录
- [ ] 全部类型显示所有记录

#### 测试4-3：数据展示
**步骤**：
1. 查看每条记录的详细信息

**预期结果**：
- [ ] 类型名称中文显示
- [ ] 金额带±号
- [ ] 余额变动清晰（前→后）
- [ ] 备注信息完整
- [ ] 时间格式化正确

#### 测试4-4：下拉刷新和加载更多
**预期结果**：
- [ ] 下拉刷新正常
- [ ] 上拉加载更多正常
- [ ] 骨架屏显示正常

---

### 模块5：个人中心测试

#### 测试5-1：信息展示
**步骤**：
1. 点击底部"我的"
2. 进入个人中心

**预期结果**：
- [ ] 请求 `GET /api/user/info` 成功
- [ ] 显示用户名和昵称
- [ ] 显示当前积分（蓝色）
- [ ] 显示累计下注
- [ ] 显示总盈亏（盈利绿色、亏损红色）
- [ ] 功能菜单显示完整

#### 测试5-2：修改密码 - 成功场景
**步骤**：
1. 点击"修改密码"
2. 输入旧密码：123456
3. 输入新密码：654321
4. 确认密码：654321
5. 点击"确认"

**预期结果**：
- [ ] 弹窗正常显示
- [ ] 表单验证通过
- [ ] 请求 `POST /api/user/change-password` 成功
- [ ] 提示"密码修改成功，请重新登录"
- [ ] 1.5秒后自动退出
- [ ] 跳转到登录页
- [ ] Token已清除

#### 测试5-3：修改密码 - 错误场景
**步骤**：
1. 输入错误的旧密码
2. 点击确认

**预期结果**：
- [ ] 提示"旧密码错误"
- [ ] 不退出登录
- [ ] 可以重新输入

#### 测试5-4：修改密码 - 验证测试
**步骤**：
1. 新密码输入：123（少于6位）
2. 确认密码与新密码不一致

**预期结果**：
- [ ] 提示"密码长度为6-20位"
- [ ] 提示"两次密码输入不一致"
- [ ] 不提交表单

#### 测试5-5：退出登录
**步骤**：
1. 点击"退出登录"
2. 点击"确认"

**预期结果**：
- [ ] 显示确认弹窗
- [ ] 清除Token和用户信息
- [ ] 提示"已退出登录"
- [ ] 跳转到登录页

#### 测试5-6：菜单导航
**步骤**：
1. 点击"下注历史"
2. 点击"积分记录"
3. 点击"开奖历史"

**预期结果**：
- [ ] 正确跳转到对应页面

---

## 🔄 完整业务流程测试

### 流程1：新用户首次使用
1. 打开应用 → 登录页
2. 输入账号密码 → 登录成功
3. 进入首页 → 查看期号和倒计时
4. 选择倍数下注 → 输入100
5. 确认下注 → 下注成功
6. 查看积分 → 积分减少
7. 查看积分记录 → 看到下注和手续费记录
8. 等待开奖 → 系统自动结算
9. 查看开奖历史 → 看到开奖结果
10. 查看积分记录 → 看到结算记录

### 流程2：查看历史数据
1. 进入开奖历史
2. 浏览最近开奖
3. 搜索特定期号
4. 查看开奖详情
5. 返回首页

### 流程3：管理账号
1. 进入个人中心
2. 查看统计信息
3. 修改密码
4. 重新登录
5. 退出登录

---

## 📊 API对接测试

### 测试清单

| API | 方法 | 路径 | 状态 |
|-----|------|------|------|
| 用户登录 | POST | `/api/user/login` | ⏳ |
| 用户信息 | GET | `/api/user/info` | ⏳ |
| 当前期信息 | GET | `/api/lottery/current` | ⏳ |
| 提交下注 | POST | `/api/user/bet` | ⏳ |
| 下注历史 | GET | `/api/user/bet-history` | ⏳ |
| 开奖历史 | GET | `/api/lottery/history` | ⏳ |
| 积分记录 | GET | `/api/user/point-records` | ⏳ |
| 修改密码 | POST | `/api/user/change-password` | ⏳ |

---

## 🎨 UI/UX测试

### 视觉测试
- [ ] 所有页面样式正常
- [ ] 颜色搭配合理
- [ ] 字体大小适中
- [ ] 间距布局美观
- [ ] 图标显示正常

### 交互测试
- [ ] 按钮点击响应
- [ ] 表单输入流畅
- [ ] 页面切换平滑
- [ ] 滚动体验好
- [ ] 加载状态清晰

### 响应式测试
- [ ] iPhone SE（375px）正常
- [ ] iPhone 12（390px）正常
- [ ] iPhone 14 Pro Max（430px）正常
- [ ] Android手机正常
- [ ] 横屏显示正常

---

## 🐛 错误处理测试

### 网络错误
**步骤**：
1. 关闭后端服务
2. 尝试操作

**预期**：
- [ ] 提示"网络连接失败"
- [ ] 不崩溃
- [ ] 可以重试

### Token过期
**步骤**：
1. 手动清除localStorage的token
2. 刷新页面
3. 访问需要登录的页面

**预期**：
- [ ] 自动跳转到登录页
- [ ] 提示"请重新登录"

### 数据为空
**步骤**：
1. 搜索不存在的期号
2. 筛选没有记录的类型

**预期**：
- [ ] 显示空状态图标和文字
- [ ] 提示友好

---

## ⚡ 性能测试

### 加载速度
- [ ] 首屏加载 < 2秒
- [ ] 页面切换 < 500ms
- [ ] API响应 < 1秒

### 内存占用
- [ ] 滚动加载不卡顿
- [ ] 长时间使用不崩溃
- [ ] 内存占用合理

### 网络请求
- [ ] 无重复请求
- [ ] 防抖正常工作
- [ ] 缓存策略合理

---

## 📱 移动端特性测试

### 触摸操作
- [ ] 下拉刷新流畅
- [ ] 滚动平滑
- [ ] 点击区域足够大
- [ ] 长按无误触发

### 屏幕适配
- [ ] 小屏幕正常
- [ ] 大屏幕正常
- [ ] 横竖屏切换正常
- [ ] 安全区域处理

### 输入体验
- [ ] 软键盘弹出正常
- [ ] 输入框不被遮挡
- [ ] 输入类型正确（数字键盘等）

---

## 🔐 安全性测试

### 认证测试
- [ ] 未登录访问首页 → 跳转登录页
- [ ] Token无效 → 跳转登录页
- [ ] 登录状态持久化正常

### 数据安全
- [ ] 密码输入框type="password"
- [ ] 敏感信息不在URL中
- [ ] Token安全存储

---

## 📋 测试记录表

### 日期：2024年11月26日

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 登录功能 | ⏳ |  |
| 首页显示 | ⏳ |  |
| 倍数下注 | ⏳ |  |
| 组合下注 | ⏳ |  |
| 开奖历史 | ⏳ |  |
| 积分记录 | ⏳ |  |
| 个人中心 | ⏳ |  |
| 修改密码 | ⏳ |  |
| 退出登录 | ⏳ |  |

---

## 🐛 发现的问题

| 编号 | 问题描述 | 严重程度 | 状态 | 备注 |
|------|---------|---------|------|------|
| 1 | | | | |
| 2 | | | | |

---

## ✅ 测试通过标准

### 必须通过（P0）
- [ ] 所有核心功能正常
- [ ] 所有API对接成功
- [ ] 无严重Bug
- [ ] 无崩溃问题

### 应该通过（P1）
- [ ] UI美观
- [ ] 交互流畅
- [ ] 提示友好
- [ ] 性能良好

### 建议通过（P2）
- [ ] 细节完善
- [ ] 动画流畅
- [ ] 无警告信息

---

## 🎯 测试结论

### 测试结果
- [ ] ✅ **通过** - 所有功能正常，可以发布
- [ ] ⚠️ **有问题** - 存在问题需要修复
- [ ] ❌ **不通过** - 严重问题需要重做

### 测试报告
**测试人员**：___________  
**测试环境**：开发环境  
**测试时间**：___________  
**测试结果**：___________

---

## 📝 后续工作

### 如果测试通过
1. 生成测试报告
2. 准备生产部署
3. 编写使用手册

### 如果有问题
1. 记录问题详情
2. 修复问题
3. 重新测试

---

**文档版本**：v1.0  
**创建日期**：2024年11月26日





