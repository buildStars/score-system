# 首页倍数按钮优化说明

## 优化内容

将"倍数"投注选项从单独的输入区域改为与其他投注选项（大、小、单、双等）并列的按钮形式，统一交互方式。

---

## 修改前后对比

### 修改前 ❌
```
下注选项：
[单] [双]
[大] [小]
[大单] [大双] [小单] [小双]

倍数：[输入框] [确定]  ← 单独的倍数输入区域
```

### 修改后 ✅
```
下注选项：
[单] [双]
[大] [小]
[大单] [大双] [小单] [小双]
[倍数]  ← 倍数也是按钮，和其他选项并列

金额：[输入框] [确定]  ← 统一的金额输入区域
```

---

## 功能特点

### 1. 统一的交互方式

所有投注选项都使用相同的交互流程：
1. 点击选项按钮（单/双/大/小/大单/大双/小单/小双/**倍数**）
2. 按钮高亮显示（紫色渐变背景）
3. 在下方输入金额
4. 点击"确定"提交下注

### 2. 智能判断下注类型

后端提交时自动判断：
```typescript
// 判断是倍数下注还是组合下注
const betType = selectedOption.value === '倍数' ? 'multiple' : 'combo'
const betContent = selectedOption.value === '倍数' ? String(amount) : selectedOption.value
```

- **倍数下注**：`betType = 'multiple'`, `betContent = 金额`
- **组合下注**：`betType = 'combo'`, `betContent = 选项名称`

### 3. 界面布局

```
┌──────────────────────────────────┐
│ 一分耕耘，一分收获                 │
├──────────────────────────────────┤
│ 距 3364940期    积分 88653.00    │
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━┓    │
│ ┃ 距封盘         04:32     ┃    │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━┛    │
├──────────────────────────────────┤
│ 第3364939期  7 2 8 17 天 单      │
├──────────────────────────────────┤
│ ┌────────┬────────┐              │
│ │  单    │  双    │              │
│ └────────┴────────┘              │
│ ┌────────┬────────┐              │
│ │  大    │  小    │              │
│ └────────┴────────┘              │
│ ┌───┬───┬───┬───┐                │
│ │大单│大双│小单│小双│              │
│ └───┴───┴───┴───┘                │
│ ┌──────────────────┐             │
│ │      倍数        │  ← 新增     │
│ └──────────────────┘             │
├──────────────────────────────────┤
│ 倍数  [¥_______]  [确定]         │
│ [50][100][200][500][1000]        │
│ 本期选项最低积分：0               │
└──────────────────────────────────┘
```

---

## 技术实现

### 1. HTML 结构

```vue
<div class="bet-options">
  <!-- 单、双 -->
  <div class="options-row">
    <div v-for="option in ['单', '双']" :key="option"
         :class="['option-btn', { 'active': selectedOption === option }]"
         @click="selectOption(option)">
      {{ option }}
    </div>
  </div>
  
  <!-- 大、小 -->
  <div class="options-row">
    <div v-for="option in ['大', '小']" :key="option"
         :class="['option-btn', { 'active': selectedOption === option }]"
         @click="selectOption(option)">
      {{ option }}
    </div>
  </div>
  
  <!-- 大单、大双、小单、小双 -->
  <div class="options-row">
    <div v-for="option in ['大单', '大双', '小单', '小双']" :key="option"
         :class="['option-btn', { 'active': selectedOption === option }]"
         @click="selectOption(option)">
      {{ option }}
    </div>
  </div>
  
  <!-- 倍数（新增）-->
  <div class="options-row">
    <div :class="['option-btn', { 'active': selectedOption === '倍数' }]"
         @click="selectOption('倍数')">
      倍数
    </div>
  </div>
</div>
```

### 2. 提交逻辑

```typescript
const onCompactSubmitBet = async () => {
  // 验证选项和金额...
  
  // 判断下注类型
  const betType = selectedOption.value === '倍数' ? 'multiple' : 'combo'
  const betContent = selectedOption.value === '倍数' ? String(amount) : selectedOption.value
  
  await userApi.submitBet({
    issue: lotteryStore.currentIssue,
    betType: betType,
    betContent: betContent,
    amount: amount,
  })
  
  // 刷新数据...
}
```

### 3. 样式设计

```scss
.option-btn {
  flex: 1;
  padding: 12px;
  background: #f5f5f5;
  border-radius: 6px;
  text-align: center;
  font-size: 15px;
  font-weight: 500;
  color: #333;
  cursor: pointer;
  transition: all 0.3s;
  
  &:active {
    transform: scale(0.95);
  }
  
  &.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
  }
}
```

---

## 下注流程

### 场景1：组合下注（大/小/单/双等）

1. 用户点击"大"按钮
2. "大"按钮高亮（紫色渐变）
3. 用户在金额输入框输入"1000"
4. 点击"确定"按钮
5. 后端收到：
   ```json
   {
     "issue": "3364940",
     "betType": "combo",
     "betContent": "大",
     "amount": 1000
   }
   ```

### 场景2：倍数下注

1. 用户点击"倍数"按钮
2. "倍数"按钮高亮（紫色渐变）
3. 用户在金额输入框输入"500"
4. 点击"确定"按钮
5. 后端收到：
   ```json
   {
     "issue": "3364940",
     "betType": "multiple",
     "betContent": "500",
     "amount": 500
   }
   ```

**注意：** 倍数下注时，`betContent` 为金额字符串。

---

## 用户体验提升

### 1. 交互一致性 ✅
所有投注选项都是按钮形式，点击高亮，交互统一。

### 2. 界面简洁 ✅
不再有单独的倍数输入区域，界面更加整齐。

### 3. 操作便捷 ✅
用户只需：选择选项 → 输入金额 → 确定，3步完成下注。

### 4. 视觉清晰 ✅
选中的选项有明显的紫色渐变高亮，一目了然。

---

## 兼容性说明

### 后端接口不变
```
POST /api/user/bet
{
  issue: string
  betType: 'multiple' | 'combo'
  betContent: string
  amount: number
}
```

### 数据存储不变
- 倍数下注：`betType = 'multiple'`, `betContent = '500'`
- 组合下注：`betType = 'combo'`, `betContent = '大'`

### 历史记录显示不变
- 在"投注历史"和"当期下注展示"中，仍然会正确显示为"倍数"或"大/小/单/双"等

---

## 测试场景

### 测试1：点击倍数按钮
1. 点击"倍数"按钮
2. ✅ "倍数"按钮变为紫色渐变背景
3. ✅ 其他按钮恢复灰色背景

### 测试2：倍数下注
1. 点击"倍数"按钮
2. 输入金额"1000"
3. 点击"确定"
4. ✅ 提示"下注成功"
5. ✅ "当期下注"区域显示"倍数 1000分"
6. ✅ 积分正确减少

### 测试3：切换选项
1. 点击"倍数"按钮（高亮）
2. 输入金额"500"
3. 再点击"大"按钮
4. ✅ "倍数"取消高亮，"大"变为高亮
5. ✅ 金额输入框中的"500"保留
6. 点击"确定"
7. ✅ 提交的是"大 500分"组合下注

### 测试4：连续下注
1. 点击"倍数"，输入"1000"，确定
2. 再次点击"倍数"，输入"500"，确定
3. ✅ "当期下注"显示"倍数 1500分"（合并显示）

### 测试5：快捷金额
1. 点击"倍数"按钮
2. 点击快捷金额"100"
3. ✅ 金额输入框自动填充"100"
4. 点击"确定"
5. ✅ 下注成功

---

## 优化效果

### 界面布局 ⭐⭐⭐⭐⭐
- 所有选项统一为按钮形式
- 布局整齐，层次清晰

### 交互体验 ⭐⭐⭐⭐⭐
- 操作流程统一
- 点击反馈明显（颜色高亮 + 缩放动画）

### 功能完整性 ⭐⭐⭐⭐⭐
- 倍数下注和组合下注功能完全保留
- 快捷金额按钮可用于所有选项

### 代码可维护性 ⭐⭐⭐⭐⭐
- 逻辑清晰，易于理解
- 后端接口不变，兼容性好

---

## 总结

✅ **统一交互**：所有投注选项都是按钮，交互方式一致
✅ **界面简洁**：移除了单独的倍数输入区域
✅ **操作便捷**：选择 → 输入 → 确定，3步下注
✅ **功能完整**：倍数下注和组合下注功能完全保留
✅ **兼容性好**：后端接口不变，历史数据不受影响

该优化使首页投注面板更加统一、简洁、易用！🎉



